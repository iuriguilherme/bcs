<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cell Simulator - Multi-Level Life Simulation</title>
    <meta name="description" content="A hierarchical life simulation from atoms to social organisms">
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">üß¨ Cell Simulator</h1>
            <div class="level-indicator">
                <span class="level-label">Level:</span>
                <div class="level-buttons" id="levelButtons">
                    <button class="level-btn active" data-level="0" title="Atoms">1</button>
                    <button class="level-btn" data-level="1" title="Molecules">2</button>
                    <button class="level-btn" data-level="2" title="Proteins">3</button>
                    <button class="level-btn" data-level="3" title="Cells">4</button>
                    <button class="level-btn" data-level="4" title="Organisms">5</button>
                    <button class="level-btn" data-level="5" title="Populations">6</button>
                </div>
            </div>
            <div class="sim-controls">
                <button id="playPauseBtn" class="control-btn play-pause-btn" title="Play/Pause">‚ñ∂Ô∏è Play</button>
                <button id="stepBtn" class="control-btn" title="Step">‚è≠Ô∏è</button>
                <button id="spawnerBtn" class="control-btn spawner-btn" title="Toggle Atom Spawner">‚öõÔ∏è</button>
                <input type="range" id="speedSlider" min="1" max="100" value="50" title="Simulation Speed">
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Panel - Tools -->
            <aside class="panel left-panel">
                <h2 class="panel-title">Tools</h2>
                <div class="tool-section">
                    <h3 id="paletteTitle">Place Atoms</h3>
                    <div class="atom-palette" id="entityPalette">
                        <!-- Populated by JS -->
                    </div>
                </div>
                <div class="tool-section">
                    <h3>Actions</h3>
                    <button class="tool-btn" id="selectTool" data-tool="select">üîç Select</button>
                    <button class="tool-btn active" id="placeTool" data-tool="place">‚ûï Place</button>
                    <button class="tool-btn" id="deleteTool" data-tool="delete">üóëÔ∏è Delete</button>
                </div>
            </aside>

            <!-- Canvas Area -->
            <div class="canvas-container">
                <canvas id="simCanvas"></canvas>
                <div class="canvas-overlay" id="canvasOverlay">
                    <div class="info-popup" id="infoPopup" style="display: none;">
                        <div class="popup-content" id="popupContent"></div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Catalogue & Info -->
            <aside class="panel right-panel">
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="catalogue">Catalogue</button>
                    <button class="tab-btn" data-tab="inspector">Inspector</button>
                </div>

                <div class="tab-content active" id="catalogueTab">
                    <div class="search-box">
                        <input type="text" id="catalogueSearch" placeholder="Search blueprints...">
                    </div>
                    <div class="catalogue-list" id="catalogueList">
                        <p class="empty-state">No blueprints yet. Create stable molecules to add them!</p>
                    </div>
                </div>

                <div class="tab-content" id="inspectorTab">
                    <div class="inspector-content" id="inspectorContent">
                        <p class="empty-state">Click on an entity to inspect it.</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <span id="atomCount">Atoms: 0</span>
            <span id="moleculeCount">Mol: 0</span>
            <span id="proteinCount">Prot: 0</span>
            <span id="cellCount">Cells: 0</span>
            <span id="tickCounter">Tick: 0</span>
            <span id="fpsCounter">FPS: 0</span>
        </footer>

        <!-- Spawner Configuration Modal -->
        <div id="spawnerModal" class="modal" style="display: none;">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>‚öõÔ∏è Atom Spawner Configuration</h3>
                    <button id="closeSpawnerModal" class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="spawnInterval">Ticks Between Spawns:</label>
                        <input type="number" id="spawnInterval" value="60" min="1" max="600">
                        <span class="form-hint">60 ticks ‚âà 1 second</span>
                    </div>
                    <div class="form-group">
                        <label>Atom Pool (select which atoms can spawn):</label>
                        <div class="atom-pool-selector" id="atomPoolSelector">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Spawn Zone Size:</label>
                        <div class="zone-size-inputs">
                            <input type="number" id="zoneWidth" value="400" min="50"> √ó 
                            <input type="number" id="zoneHeight" value="400" min="50"> px
                        </div>
                        <span class="form-hint">Drag zone borders on canvas to resize visually</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="applySpawnerConfig" class="btn-primary">Apply</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts (order matters) -->
    <script src="src/core/utils.js"></script>
    <script src="src/data/periodic-table.js"></script>
    <script src="src/data/stable-molecules.js"></script>
    <script src="src/entities/atom.js"></script>
    <script src="src/entities/bond.js"></script>
    <script src="src/entities/molecule.js"></script>
    <script src="src/entities/protein.js"></script>
    <script src="src/entities/polymer.js"></script>
    <script src="src/entities/intention.js"></script>
    <script src="src/systems/neural-network.js"></script>
    <script src="src/systems/atom-spawner.js"></script>
    <script src="src/entities/cell-memory.js"></script>
    <script src="src/entities/cell.js"></script>
    <script src="src/entities/prokaryote.js"></script>
    <script src="src/entities/prokaryote-factory.js"></script>
    <script src="src/core/environment.js"></script>
    <script src="src/core/simulation.js"></script>
    <script src="src/catalogue/blueprint.js"></script>
    <script src="src/catalogue/monomer-templates.js"></script>
    <script src="src/catalogue/polymer-blueprints.js"></script>
    <script src="src/catalogue/catalogue.js"></script>
    <script src="src/viewer/viewer.js"></script>
    <script src="src/viewer/controls.js"></script>
    <script src="src/viewer/catalogue-ui.js"></script>
    <script src="src/main.js"></script>
</body>

</html>